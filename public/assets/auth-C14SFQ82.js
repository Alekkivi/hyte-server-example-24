import"./universal-styles-BdW0YgS1.js";import{s as n,f as c}from"./fetch-Ne0umvXK.js";const l=document.querySelector(".loginuser");l.addEventListener("click",async o=>{const e=document.querySelector(".login_form");if(o.preventDefault(),!e.checkValidity()){console.log("v채채rr채채"),n("Crimson","Incorrect username or password");return}const t="/api/auth/login",s={username:e.querySelector("input[name=username]").value,password:e.querySelector("input[name=password]").value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};c(t,a).then(r=>{if(r.token==null)n("Crimson","Incorrect username or password");else{const i=r.user.user_level;localStorage.setItem("token",r.token),i==="admin"?window.location.href="admin.html":i==="regular"&&(window.location.href="regular.html")}})});const u=document.querySelector(".createuser");u.addEventListener("click",async o=>{const e=document.querySelector(".create_user_form");if(o.preventDefault(),!e.checkValidity()){e.reportValidity();return}const t="/api/users",s={username:e.querySelector("input[name=username]").value,password:e.querySelector("input[name=password]").value,email:e.querySelector("input[name=email]").value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};c(t,a).then(r=>{r.error?r.error==="Username taken"?n("crimson","Username or email already taken"):n("crimson","Invalid input"):n("darkgreen","New user created!")})});
