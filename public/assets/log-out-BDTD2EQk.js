import{g as i,s as c,f as d}from"./fetch-qW78LKou.js";function u(e){const t=new Date(e),n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${o}-${r}`}function m(e){const t=new Date(e),n=new Date(t.getTime()+2*60*60*1e3),o=n.getDate(),r=n.getMonth()+1,s=n.getFullYear();return`${o<10?"0":""}${o}.${r<10?"0":""}${r}.${s}`}function f(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${o}`}function p(){const e=document.querySelector(".right-diary");e.innerHTML="",document.querySelector("#hide_all_entries").style.display="None"}function h(){document.querySelector(".tbody").innerHTML="",document.querySelector(".thead").innerHTML="",document.querySelector(".middle-exercise").innerHTML="",document.querySelector("#hide_all_exercises").style.display="None"}function S(){document.querySelector("#hide_all_entries").style.display="none";const e=document.querySelector("#entry_target");e.innerHTML=""}function $(){document.querySelector("#hide_all_users").style.display="none",document.querySelector(".tbody").innerHTML="",document.querySelector("thead").innerHTML=""}async function D(e){const t=e.target.getAttribute("data-id");console.log(`Accessing user info: user_id = ${t}`);const n=await i(`/api/users/${t}`);n.error?c("crimson",n.message):l(n)}async function M(e){console.log(`Accessing user info: user_id = ${e}`);const t=await i(`/api/users/${e}`);t.error?c("crimson",t.message):l(t)}function l(e){const t=document.querySelector(".info_dialog"),n=document.getElementById("modal_target");n.innerHTML="";for(let r in e){let s=e[r];if(r==="Username"){let a=document.createElement("h3");a.innerText=s,n.appendChild(a)}else if(r==="Created at"){let a=document.createElement("p");a.innerHTML=`<span>${r}:</span> ${m(u(s))}`,n.appendChild(a)}else{let a=document.createElement("p");a.innerHTML=`<span>${r}:</span> ${s}`,n.appendChild(a)}}t.appendChild(n);let o=document.createElement("button");o.textContent="Close",n.appendChild(o),o.addEventListener("click",()=>{t.close()}),t.showModal()}async function g(e,t){const o={method:"DELETE",headers:{Authorization:"Bearer: "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(t)};return d(e,o)}async function T(e,t){const n=e.target.attributes["data-id"].value,o=document.getElementById(t),r={entry_id:n};if(confirm("Oletko varma poistosta")){const a=await g("/api/entries",r);a.error?c("crimson","Couldn't delete entry!"):(o.innerHTML="",console.log(a),c("darkgreen","Entry deleted!"))}}function E(){localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("username"),window.location.href="index.html"}export{M as a,p as b,u as c,T as d,h as e,m as f,f as g,g as h,S as i,$ as j,D as k,E as l};
